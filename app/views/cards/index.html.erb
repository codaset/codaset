<% page_title 'Cards', head_only: true %>

<div class="ui seven column grid" id="card_board">
  <% Card::STATES.each do |state_name, closed| %>
    <div class="column">
      <% state = @cards.select { |g| g[:_id] == state_name.to_s }.first %>

      <h5 class="header"><%= state_name.to_s.humanize %> (<%= state[:count] %>)</h5>

      <% state[:cards].each do |card| %>
        <%- card = Card.new(card) -%>

        <%= link_to card, class: 'ui card' do %>
          <div class="content">
            <div><%= card %></div>
            <div class="meta">#<%= card.number %></div>
          </div>
        <% end -%>
      <% end %>
    </div>
  <% end %>
</div>

<br>

<%= link_to 'New Card', new_organisation_card_path %>
